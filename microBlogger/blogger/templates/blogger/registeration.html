{% extends 'blogger/base.html' %}
{% load staticfiles%}


{% block javascript %}
    <script>
        /* For avoiding any conflicts using self inoking function to rap the scope of $->jquerry .
           Outside this function $ is either undefined or refers to some othe library */
         
        (function($){ $("#id_username").change(function () {
                var username = this.value;
                $.ajax({
                    url: "{% url 'blogger:validate_username' %}",
                    data: {
                        'username': username
                    },
                    dataType: 'json',
                    success: function (data) {
                        if (data.is_taken) {
                            alert("A user with this username already exists.");
                        }
                    }
                });
            });
        })(jQuery);
  </script>







{% endblock %}

{% block body_block %}
    <div class="jumbotron">
       {% if registered %}
        <h1>Thank you for Registering!</h1>
       {% else %}
        <h1>Register Here :</h1>
            <form method="POST">  <!-- add action to move to blogs page -->
                {{ user_form.as_p }}
                {% csrf_token %}
                <input type="submit" class="btn btn-primary" value="Register">
            </form>
        {% endif %}

    </div>
{% endblock %}
 <!-- action="{% url 'blogger:display' %}" -->
